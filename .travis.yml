language: objective-c
osx_image: xcode8
xcode_project: 'xcodeProject/xSwift.xcodeproj'
xcode_scheme: 'xSwiftTests'

before_install:
  - gem install danger xcpretty xcpretty-json-formatter
  - brew update
  - brew outdated swiftlint || brew upgrade swiftlint

script:
  - lint --quiet 2> build/reports/lintreport.json 
  - xcodebuild test -project 'xcodeProject/xSwift.xcodeproj' -scheme 'xSwiftTests' | xcpretty -f `xcpretty-json-formatter`
  - bin/fetch-configlet
  - bin/configlet .
  - danger

after_success:
  - ls -al